{% load budget static %}

<!DOCTYPE html>
<link rel="stylesheet" href="{% static 'budget/style.css' %}">
<script src="{% static 'budget/account.js' %}"></script>

<p><a href="{% url 'overview' account.budget_id %}">Overview</a></p>
{% url 'budget' account.budget_id as budget_url %}
<p><a href="{{ budget_url }}">See all transactions</a></p>
<table id="table">
    <th>Date</th>
    <th>Description</th>
    <th>Amount</th>
    <th>{{ account.name | default:account.budget.name }}</th>
    {% for entry in entries %}
    <tr class="{% cycle 'a' 'b' as rowcolor %}" tabindex="0" data-id="{{entry.transaction.id}}">
        <td>{{entry.transaction.date}}</td>
        <td>{{entry.transaction|transaction_description:account}}</td>
        <td>{{entry.amount}}</td>
        <td>
            {{entry.running_sum}}
            <div class="detail-container">
                <div class="transaction-detail">
                    ──┐
                    <table class="transaction-detail-table">
                        <th>Account</th>
                        <th>Category</th>
                        <th>Amount</th>
                        {% for part in entry.transaction.tabular %}
                        <tr class="{% cycle 'a' 'b' as rowcolor %}">
                            <td>{% account_in_budget part.account account.budget_id %}</td>
                            <td>{% account_in_budget part.category account.budget_id %}</td>
                            <td>{{part.amount}}</td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </td>
    </tr>
    {% endfor %}
</table>
{{ data|json_script:"data" }}
