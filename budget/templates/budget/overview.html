{% load budget static %}

<!DOCTYPE html>
<link rel="stylesheet" href="{% static 'budget/style.css' %}">

<p><a href="{% url 'budget' budget_id %}">See all transactions</a></p>
<p><a href="{% url 'history' budget_id %}">Edit budget</a></p>

<table>
    <th>Category</th>
    <th>Balance</th>
    {% for category in categories %}
    <tr class="{% cycle 'a' 'b' as rowcolor %}">
        <td>{% account_in_budget category budget_id %}</td>
        <td>{{ category.balance |default:0 }}</td>
    </tr>
    {% endfor %}
    <tr class="{% cycle rowcolor %}">
        <td>Total</td>
        <td>{{ total }}</td>
    </tr>
    <tr class="{% cycle rowcolor %}">
        <td>
            <form method="post" action="{% url 'new_category' budget_id %}">
                <input type="submit" value="New Category">{% csrf_token %}
            </form>
        </td>
        <td></td>
    </tr>
</table>
<table>
    <th>Account</th>
    <th>Balance</th>
    {% for account in accounts %}
    <tr class="{% cycle 'a' 'b' as rowcolor %}">
        <td>{% account_in_budget account budget_id %}</td>
        <td>{{ account.balance |default:0 }}</td>
    </tr>
    {% endfor %}
    {% for budget, amount in debts %}
    <tr class="{% cycle rowcolor %}">
        <td><a href="{% url 'balance' budget_id budget.id %}">Owed by {{ budget }}</a></td>
        <td>{{ amount }}</td>
    </tr>
    {% endfor %}
    <tr class="{% cycle rowcolor %}">
        <td>Total</td>
        <td>{{ total }}</td>
    </tr>
    <tr class="{% cycle rowcolor %}">
        <td>
            <form method="post" action="{% url 'new_account' budget_id %}">
                <input type="submit" value="New Account">{% csrf_token %}
            </form>
        </td>
        <td></td>
    </tr>
</table>
