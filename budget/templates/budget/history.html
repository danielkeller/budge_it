{% load budget static %}

<!DOCTYPE html>
<link rel="stylesheet" href="{% static 'budget/style.css' %}">
<script src="{% static 'budget/history.js' %}"></script>

<p><a href="{% url 'overview' budget_id %}">Overview</a></p>
<p><a href="{% url 'budget' budget_id %}">See all transactions</a></p>

<form action="{{ request.get_full_path }}" method="post">
    <table id="table">
        <tr>
            <th></th>
            {% for month in months %}
            <th colspan="3">{{ month|date:"M Y" }}</th>
            {% endfor %}
        </tr>
        <tr>
            <th></th>
            {% for month in months %}
            <th>Budgeted</th>
            <th>Spent</th>
            <th>Total</th>
            {% endfor %}
        </tr>
        {% for category, row in grid %}
        <tr data-category="{{category.id}}" data-inbox="{{category.name|yesno:",1"}}">
            <td>{{ category.name|default:"Inbox" }}</td>
            {% for field, total in row %}
            <td class="tdinput">{{field}}</td>
            <td class="spent">{{total|default:""}}</td>
            <td class="total"></td>
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
    {% for form in formset %}
    {{ form.id }}
    {{ form.date }}
    {% endfor %}
    {{ formset.management_form }}
    {% csrf_token %}
    <input id="submit-button" type="submit" value="Save">
</form>
{{ data|json_script:"data" }}
{{ form.errors|default:"" }}
{{ formset.errors|default:"" }}
{{ formset.non_form_errors }}
